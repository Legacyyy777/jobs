# ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต painter_bot

## ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฒะตัััะฒะฐะฝะธะต

ะกะธััะตะผะฐ ัะตะฟะตัั **ะฐะฒัะพะผะฐัะธัะตัะบะธ** ัะพะทะดะฐะตั ะฑะฐะทั ะดะฐะฝะฝัั ะธ ัะฐะฑะปะธัั ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต. ะะพะดะดะตัะถะธะฒะฐะตั ะฟะพะปะฝัั ะพัะธััะบั ัะตัะตะท `docker compose down -v`!

### ะัััััะน ััะฐัั

1. **ะะฐัััะพะนัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```bash
cp env.example .env
# ะััะตะดะฐะบัะธััะนัะต .env ัะฐะนะป, ะดะพะฑะฐะฒััะต BOT_TOKEN ะธ ะดััะณะธะต ะฝะฐัััะพะนะบะธ
```

2. **ะะฐะฟัััะธัะต ัะธััะตะผั:**
```bash
docker-compose up -d
```

3. **ะะพัะพะฒะพ!** ๐

## ะงัะพ ะฟัะพะธััะพะดะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ

### โ ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต:
- PostgreSQL ัะตัะฒะตั ะทะฐะฟััะบะฐะตััั
- ะกะพะทะดะฐะตััั ะฑะฐะทะฐ ะดะฐะฝะฝัั `painter_bot` (ะตัะปะธ ะฝะต ัััะตััะฒัะตั)
- ะกะพะทะดะฐัััั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ัะฐะฑะปะธัั
- ะกะพะทะดะฐัััั ะธะฝะดะตะบัั ะดะปั ะพะฟัะธะผะธะทะฐัะธะธ
- ะะพั ะฟะพะดะบะปััะฐะตััั ะบ ะฑะฐะทะต ะดะฐะฝะฝัั

### โ ะัะธ ะฟัะพะฑะปะตะผะฐั ั ะะ:
- ะะพั ะฟัะพะดะพะปะถะฐะตั ัะฐะฑะพัะฐัั ะฒ ะพะณัะฐะฝะธัะตะฝะฝะพะผ ัะตะถะธะผะต
- ะะพะปัะทะพะฒะฐัะตะปะธ ะฟะพะปััะฐัั ัะฒะตะดะพะผะปะตะฝะธะต ะพ ะฒัะตะผะตะฝะฝะพะน ะฝะตะดะพัััะฟะฝะพััะธ
- ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฟััะบะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธั ัะพะตะดะธะฝะตะฝะธั
- Graceful degradation - ะฝะธะบะฐะบะธั ะบัะฐัะตะน

### โ ะะพะฝะธัะพัะธะฝะณ:
- ะะตัะธะพะดะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ัะพััะพัะฝะธั ะะ (ะบะฐะถะดัะต 5 ะผะธะฝัั)
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะฟะพะดะบะปััะตะฝะธะต ะฟัะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะธ
- ะะพะดัะพะฑะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ัะพะฑััะธะน

## ะัะพะฒะตัะบะฐ ัะฐะฑะพัั

```bash
# ะัะพะฒะตัััะต ััะฐััั ะบะพะฝัะตะนะฝะตัะพะฒ
docker-compose ps

# ะะพัะผะพััะธัะต ะปะพะณะธ
docker logs painter_bot --tail 20
docker logs painter_bot_db --tail 20

# ะัะพะฒะตัััะต ะฑะฐะทั ะดะฐะฝะฝัั
docker exec painter_bot_db psql -U postgres -d painter_bot -c "SELECT COUNT(*) FROM users;"
```

## ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

### ะัะพะฑะปะตะผะฐ: ะะพั ะฝะต ะทะฐะฟััะบะฐะตััั
**ะะตัะตะฝะธะต:** ะัะพะฒะตัััะต ะปะพะณะธ
```bash
docker logs painter_bot
```

### ะัะพะฑะปะตะผะฐ: ะะฐะทะฐ ะดะฐะฝะฝัั ะฝะต ัะพะทะดะฐะตััั
**ะะตัะตะฝะธะต:** ะะตัะตะทะฐะฟัััะธัะต ะบะพะฝัะตะนะฝะตัั
```bash
docker-compose restart
```

### ะัะพะฑะปะตะผะฐ: ะะพั ัะฐะฑะพัะฐะตั ะฑะตะท ะะ
**ะะตัะตะฝะธะต:** ะญัะพ ะฝะพัะผะฐะปัะฝะพ! ะะพั ัะฒะตะดะพะผะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะพ ะฒัะตะผะตะฝะฝะพะน ะฝะตะดะพัััะฟะฝะพััะธ ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒะพัััะฐะฝะพะฒะธััั ะฟัะธ ะดะพัััะฟะฝะพััะธ ะะ.

## ะััะธัะตะบัััะฐ ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Telegram Bot  โ    โ   Middleware     โ    โ   PostgreSQL    โ
โ                 โ    โ   (DB Check)     โ    โ                 โ
โ  - Handlers     โโโโโบโ                  โโโโโบโ  - painter_bot  โ
โ  - FSM States   โ    โ  - Health Check  โ    โ  - Auto Create  โ
โ  - Graceful Deg โ    โ  - Auto Reconnectโ    โ  - Tables       โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ะัะพะฑะตะฝะฝะพััะธ

- ๐ **ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต** - ะฝะธะบะฐะบะธั ัััะฝัั ะดะตะนััะฒะธะน
- ๐ก๏ธ **Graceful degradation** - ะฑะพั ัะฐะฑะพัะฐะตั ะดะฐะถะต ะฑะตะท ะะ
- ๐ **ะะพะฝะธัะพัะธะฝะณ** - ะฟะพััะพัะฝะฝัะน ะบะพะฝััะพะปั ัะพััะพัะฝะธั
- ๐ **Zero-downtime deployment** - ะพะฑะฝะพะฒะปะตะฝะธั ะฑะตะท ะฟัะพััะพั
- ๐ **ะะพะดัะพะฑะฝะพะต ะปะพะณะธัะพะฒะฐะฝะธะต** - ะปะตะณะบะพ ะดะธะฐะณะฝะพััะธัะพะฒะฐัั ะฟัะพะฑะปะตะผั

## ะะพะผะฐะฝะดั ะดะปั ัะฟัะฐะฒะปะตะฝะธั

```bash
# ะะฐะฟััะบ
docker-compose up -d

# ะะตัะตะทะฐะฟััะบ
docker-compose restart

# ะััะฐะฝะพะฒะบะฐ (ั ัะพััะฐะฝะตะฝะธะตะผ ะดะฐะฝะฝัั)
docker-compose down

# ะะพะปะฝะฐั ะพัะธััะบะฐ (ัะดะฐะปัะตั ะฒัะต ะดะฐะฝะฝัะต)
docker-compose down -v

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะะฑะฝะพะฒะปะตะฝะธะต
docker-compose pull
docker-compose up -d

# ะขะตััะธัะพะฒะฐะฝะธะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธั
chmod +x test_recovery.sh
./test_recovery.sh
```

## ะะพะปะฝะฐั ะพัะธััะบะฐ ะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต

ะกะธััะตะผะฐ ะฟะพะดะดะตัะถะธะฒะฐะตั ะฟะพะปะฝัั ะพัะธััะบั ัะตัะตะท `docker compose down -v`:

```bash
# ะะพะปะฝะฐั ะพัะธััะบะฐ
docker-compose down -v

# ะะฒัะพะผะฐัะธัะตัะบะพะต ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต
docker-compose up -d
```

ะะพัะปะต ััะพะณะพ:
- โ PostgreSQL ะฟะตัะตัะพะทะดะฐะตััั ั ะฝัะปั
- โ ะะฐะทะฐ ะดะฐะฝะฝัั `painter_bot` ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
- โ ะัะต ัะฐะฑะปะธัั ะธ ะธะฝะดะตะบัั ัะพะทะดะฐัััั
- โ ะะพั ะฟะพะดะบะปััะฐะตััั ะธ ัะฐะฑะพัะฐะตั

## ะะพะฝะธัะพัะธะฝะณ ะฒ ะฟัะพะดะฐะบัะตะฝะต

ะะตะบะพะผะตะฝะดัะตััั ะฝะฐัััะพะธัั ะผะพะฝะธัะพัะธะฝะณ:
- ะะพะณะธ Docker ะบะพะฝัะตะนะฝะตัะพะฒ
- ะกัะฐััั health check
- ะะตััะธะบะธ PostgreSQL
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ัะฑะพัั

ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ะฟัะพะดะฐะบัะตะฝั! ๐ฏ
